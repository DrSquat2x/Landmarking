<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a calibration plot — plot.landmark • Landmarking</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a calibration plot — plot.landmark" />
<meta property="og:description" content="Creates a calibration plot for the landmark model fitted by fit_LME_landmark_model or fit_LOCF_landmark_model.
This function plots the observed frequencies of the event of interest against the predicted probabilities of the event of interest." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-standard navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Landmarking</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Landmarking.html">Introduction to Landmark Models</a>
    </li>
    <li>
      <a href="../articles/how_to_use.html">How to use the R package 'Landmarking'</a>
    </li>
    <li>
      <a href="../articles/Functions_fit_LOCF_LME_landmark.html">The functions 'fit_LOCF_landmark' and 'fit_LME_landmark'</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://https://github.com/isobelbarrott/Landmarking/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a calibration plot</h1>
    <small class="dont-index">Source: <a href='https://github.com/isobelbarrott/Landmarking/blob/master/R/plot.landmark.R'><code>R/plot.landmark.R</code></a></small>
    <div class="hidden name"><code>plot.landmark.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a calibration plot for the landmark model fitted by <code>fit_LME_landmark_model</code> or <code>fit_LOCF_landmark_model</code>.
This function plots the observed frequencies of the event of interest against the predicted probabilities of the event of interest.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='co'># S3 method for landmark</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>x_L</span>, <span class='va'>n</span>, <span class='va'>x_lims</span>, <span class='va'>y_lims</span>, <span class='va'>...</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Object inheriting the class <code>landmark</code>, this should be the output from either <code>fit_LME_landmark_model</code> or <code>fit_LOCF_landmark_model</code>. It should contain a list
of landmark models corresponding to different landmark times <code>x_L</code>.</p></td>
    </tr>
    <tr>
      <th>x_L</th>
      <td><p>Numeric specifying the landmark time. This indicates which landmark model in <code>x</code> to use.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>Numeric specifying the number of bins to use.</p></td>
    </tr>
    <tr>
      <th>x_lims</th>
      <td><p>Vector of length 2 specifying the limits of the x axes</p></td>
    </tr>
    <tr>
      <th>y_lims</th>
      <td><p>Vector of length 2 specifying the limits of the y axes</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to <code><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggplot2::labs</a></code> to modify axis, legend, and plot labels</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Calibration plot showing the value of predicted probabilities against observed frequencies, with a <code>y=x</code> line.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function bins the predicted probabilities of the event of interest into <code>n</code> bins. The event of interest is the event with
<code>event_status=1</code> when fitting the landmark model. For each of the <code>n</code> sets of individuals, the Aalen-Johansen estimator is fit to that set
and used to calculate the risk of an event at the horizon time. The predictions (from the landmark model) and the observed frequencies
(from the Aalen-Johansen estimator) are plotted against each other. For a perfect prediction model, the points will be plotted along the y=x line.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/isobelbarrott/Landmarking'>Landmarking</a></span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>data_repeat_outcomes</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>data_model_landmark_LOCF</span> <span class='op'>&lt;-</span></span>
<span class='r-in'>  <span class='fu'><a href='fit_LOCF_landmark.html'>fit_LOCF_landmark</a></span><span class='op'>(</span></span>
<span class='r-in'>    data_long <span class='op'>=</span> <span class='va'>data_repeat_outcomes</span>,</span>
<span class='r-in'>    x_L <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>60</span>, <span class='fl'>61</span><span class='op'>)</span>,</span>
<span class='r-in'>    x_hor <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>65</span>, <span class='fl'>66</span><span class='op'>)</span>,</span>
<span class='r-in'>    covariates <span class='op'>=</span></span>
<span class='r-in'>      <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ethnicity"</span>, <span class='st'>"smoking"</span>, <span class='st'>"diabetes"</span>, <span class='st'>"sbp_stnd"</span>, <span class='st'>"tchdl_stnd"</span><span class='op'>)</span>,</span>
<span class='r-in'>    covariates_time <span class='op'>=</span></span>
<span class='r-in'>      <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>"response_time_sbp_stnd"</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"response_time_tchdl_stnd"</span><span class='op'>)</span>,</span>
<span class='r-in'>    k <span class='op'>=</span> <span class='fl'>10</span>,</span>
<span class='r-in'>    individual_id <span class='op'>=</span> <span class='st'>"id"</span>,</span>
<span class='r-in'>    event_time <span class='op'>=</span> <span class='st'>"event_time"</span>,</span>
<span class='r-in'>    event_status <span class='op'>=</span> <span class='st'>"event_status"</span>,</span>
<span class='r-in'>    survival_submodel <span class='op'>=</span> <span class='st'>"cause_specific"</span></span>
<span class='r-in'>  <span class='op'>)</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>922 individuals have been removed from the model building as they are not in the risk set at landmark age 60</span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>670 individuals have been removed from the model building as they are not in the risk set at landmark age 61</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Fitting longitudinal submodel, landmark age 60"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Complete, landmark age 60"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Fitting survival submodel, landmark age 60"</span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>Loglik converged before variable  2 ; coefficient may be infinite. </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Complete, landmark age 60"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Fitting longitudinal submodel, landmark age 61"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Complete, landmark age 61"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Fitting survival submodel, landmark age 61"</span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>Loglik converged before variable  2 ; coefficient may be infinite. </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "Complete, landmark age 61"</span>
<span class='r-in'> <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>data_model_landmark_LOCF</span>,x_L<span class='op'>=</span><span class='fl'>60</span>,n<span class='op'>=</span><span class='fl'>5</span><span class='op'>)</span></span>
<span class='r-plt'><img src='plot.landmark-1.png' alt='' width='700' height='433' /></span>
<span class='r-in'> <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>data_model_landmark_LOCF</span>,x_L<span class='op'>=</span><span class='fl'>61</span>,n<span class='op'>=</span><span class='fl'>5</span><span class='op'>)</span></span>
<span class='r-plt'><img src='plot.landmark-2.png' alt='' width='700' height='433' /></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Isobel Barrott, Jessica Barrett.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


